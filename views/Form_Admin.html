<!--DIV PARA MOSTRAR LOS DATOS QUE EL CLIENTE INGRESO (PARTE SUPERIOR DEL FORM. Y DEBAJO DE LA ID DEL REPORTE) 
    FALTA PARA ASIGNAR TECNICOS
    UNA VEZ ENVIADO SE ENVIA AL TECNICO CORRESPONDIENTE (PHP) Y VUELVE A SU VISTA DE BANDEJA
    -->

<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informe de Situación Actual de Emergencia</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    
</head>

<body>
    <header>
        <!--NAVBAR-->
    </header>

    <main class="container mt-5">
        <h1>Informe de Situación Actual de Emergencia</h1>
        <form id="form-emergencia" onsubmit="enviarFormulario(event)" enctype="multipart/form-data">
            <!-- Sección 1: Información del Reporte -->
            <fieldset class="border p-4 mb-4">
                <legend class="w-auto">Información del Reporte</legend>

                <div class="form-group">
                    <label for="id_emergencia">ID de la Emergencia:</label>
                    <input type="text" class="form-control" id="id_emergencia" name="id_emergencia" required readonly
                        value="123456">
                </div>

        <!-- AQUI VAN LOS DATOS DEL CLIENTE QUE SE TRASPASARAN AUTOMATICAMNETE-->
        <form id="form-admin" action="" method="post">
            <!-- Campos del cliente (solo lectura) -->
            <label for="tipo_problema">Tipo de Problema:</label>
            <input type="text" id="tipo_problema" name="tipo_problema" class="form-control" value="<?php echo $tipo_problema; ?>" readonly>
        
            <label for="descripcion_cliente">Descripción del Cliente:</label>
            <textarea id="descripcion_cliente" name="descripcion_cliente" class="form-control" readonly><?php echo $descripcion_cliente; ?></textarea>
        
            <label for="fecha_reporte">Fecha y Hora del Reporte:</label>
            <input type="datetime-local" id="fecha_reporte" name="fecha_reporte" class="form-control" value="<?php echo $fecha_reporte; ?>" readonly>
        
            <label for="ubicacion_problema">Ubicación del Problema:</label>
            <input type="text" id="ubicacion_problema" name="ubicacion_problema" class="form-control" value="<?php echo $ubicacion_problema; ?>" readonly>
        </form>
                

            </fieldset>
                
            <!-- Sección 2: Detalles de la Emergencia -->
            <fieldset class="border p-4 mb-4">
                <legend class="w-auto">Detalles de la Emergencia</legend>

                <div class="form-group">
                    <label for="descripcion_actual">Descripción Actual de la Situación:</label>
                    <textarea class="form-control" id="descripcion_actual" name="descripcion_actual" rows="4"
                        placeholder="Describa la situación actual y cualquier cambio en el problema"
                        required></textarea>
                </div>

                <div class="form-group">
                    <label for="tiempo_estimado_solucion">Tiempo Estimado para Solucionar el Problema:</label>
                    <input type="text" class="form-control" id="tiempo_estimado_solucion"
                        name="tiempo_estimado_solucion" placeholder="Ej. 2 horas, 1 día" required>
                </div>
                
                <!-- Agregar lista desplegable de técnicos -->
                <div class="form-group">
                    <label for="tecnico_asignado">Asignar Técnico:</label>
                    <select class="form-control" id="tecnico_asignado" name="tecnico_asignado" required>
                        <option value="">Seleccione un técnico</option>
                        <!-- Las opciones se cargarán dinámicamente -->
                    </select>
                </div>

            </fieldset>

            <!-- Botón de envío -->
            <button type="submit" class="btn btn-primary">Enviar Informe</button>
        </form>
    </main>

    <footer class="bg-light text-center p-3 mt-5">
        <p>© 2024 Luz Alerta. Todos los derechos reservados.</p>
    </footer>

    <script src="../assets/guardar_admin.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.0.7/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>